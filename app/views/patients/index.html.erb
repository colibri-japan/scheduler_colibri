<div id="index-container">

  <%= link_to '+新規利用者', new_patient_path, class: 'btn btn-info text-white btn-margin-top', remote: true %>

  <div id="toggle-active-patients-menu" style="display:flex;margin-top:20px;margin-bottom:20px">
    <div id="active-patients" class="toggle-active-element toggle-active-selected" style="margin-right:20px">サービス実施中 (<%= @patients.sum {|k,v| v.length} %>)</div>
    <div id="deactivated-patients" class="toggle-active-element">サービス終了 (<%= @deactivated_patients.count %>)</div>
  </div>

  <div id="index-table-container">
    <table id="active-patients-table" class="table table-hover">
      <thead>
        <tr>
          <th>名前</th>
          <th>契約期間</th>
          <th>電話番号</th>
          <th>住所</th>
        </tr>
      </thead>

      <tbody>
        <% @patients.each do |kana, patients| %>
          <tr>
            <th class='table-important-fields'><%= kana %></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <% patients.each do |patient| %>
            <% cache patient do %>
              <tr class='patient-clickable-row' data-link="<%= edit_patient_path(patient, format: :js) %>" id="<%= patient.id %>">
                <%= render 'patient_row', patient: patient %>
              </tr>
            <% end %>
          <% end %>
        <% end %>
      </tbody>
    </table>

    <table id="deactivated-patients-table" class="table table-hover" style="display:none">
      <thead>
        <th>名前</th>
        <th>契約期間</th>
        <th>電話番号</th>
        <th>住所</th>
      </thead>
      <tbody>
        <% @deactivated_patients.each do |patient| %>
          <% cache patient do %>
            <tr class='patient-clickable-row' data-link="<%= edit_patient_path(patient) %>" id="<%= patient.id %>">
              <%= render 'patient_row', patient: patient %>
            </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>
    
  </div>

  
</div>
