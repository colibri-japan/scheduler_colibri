
  if (typeof calendar === 'undefined') {
    let calendar;
  }

  if ($('.calendar').length > 0) {
    calendar = $('.calendar');
  } else if ($('.patient_calendar').length > 0) {
    calendar = $('.patient_calendar');
  } else if ($('.nurse_calendar').length > 0) {
    calendar = $('.nurse_calendar');
  }



  calendar.fullCalendar('removeEvents', '<%= "unavailability_#{@unavailability.id}" %>' );
  $('.modal').modal('hide');

  calendar.fullCalendar(
    'renderEvent', 
    $.parseJSON("<%= j render(partial: 'unavailabilities/unavailability.json', locals: {unavailability: @unavailability}).html_safe  %>"), 
    false
  );

  if($('#planning-activities').length > 0) {
    $('#planning-activities').prepend("<%= j render partial: 'activities/activity', locals: {activity: @activity} %>");
  }